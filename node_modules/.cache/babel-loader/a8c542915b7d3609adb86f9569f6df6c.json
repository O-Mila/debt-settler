{"ast":null,"code":"import _toConsumableArray from \"/home/oriol/Documents/PROGRAMMING/Exercicis/mern-stepbystep/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _defineProperty from \"/home/oriol/Documents/PROGRAMMING/Exercicis/mern-stepbystep/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"/home/oriol/Documents/PROGRAMMING/Exercicis/mern-stepbystep/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/oriol/Documents/PROGRAMMING/Exercicis/mern-stepbystep/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/oriol/Documents/PROGRAMMING/Exercicis/mern-stepbystep/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/oriol/Documents/PROGRAMMING/Exercicis/mern-stepbystep/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/oriol/Documents/PROGRAMMING/Exercicis/mern-stepbystep/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/home/oriol/Documents/PROGRAMMING/Exercicis/mern-stepbystep/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/home/oriol/Documents/PROGRAMMING/Exercicis/mern-stepbystep/src/components/group/AddGroup.js\";\nimport React, { Component } from 'react';\nimport { Redirect } from 'react-router';\nimport AddUser from '../user/AddUser';\nimport axios from 'axios';\n\nvar AddGroup =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(AddGroup, _Component);\n\n  function AddGroup(props) {\n    var _this;\n\n    _classCallCheck(this, AddGroup);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(AddGroup).call(this, props));\n\n    _this.addGroup = function (e) {\n      e.preventDefault();\n      var _this$state = _this.state,\n          name = _this$state.name,\n          members = _this$state.members;\n      axios.post('http://localhost:8080/api/groups/new', {\n        name: name,\n        members: members\n      }).then(function (response) {\n        axios.get(\"http://localhost:8080/api/groups/new/\".concat(response.data._id)).then(function (response) {\n          _this.setState({\n            redirect: true\n          });\n        }).catch(function (err) {\n          return console.log(err);\n        });\n      }).catch(function (err) {\n        return console.log(err);\n      });\n    };\n\n    _this.handleChange = function (e) {\n      _this.setState(_defineProperty({}, e.target.name, e.target.value));\n    };\n\n    _this.addMember = function (suggestion) {\n      _this.setState({\n        members: [].concat(_toConsumableArray(_this.state.members), [suggestion])\n      });\n    };\n\n    _this.deleteMember = function (e) {\n      var members = _this.state.members;\n      var index = members.findIndex(function (member) {\n        return member.username === e.currentTarget.textContent;\n      });\n      members.splice(index, 1);\n\n      _this.setState({\n        members: members\n      });\n    };\n\n    _this.state = {\n      name: '',\n      members: [{\n        username: props.username,\n        _id: props._id\n      }],\n      redirect: false\n    };\n    _this.addGroup = _this.addGroup.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleChange = _this.handleChange.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(AddGroup, [{\n    key: \"render\",\n    value: function render() {\n      var _this$state2 = this.state,\n          redirect = _this$state2.redirect,\n          members = _this$state2.members;\n      var addMember = this.addMember,\n          deleteMember = this.deleteMember;\n\n      if (redirect) {\n        return React.createElement(Redirect, {\n          to: \"/groups\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 56\n          },\n          __self: this\n        });\n      }\n\n      var memberList = React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 60\n        },\n        __self: this\n      }, members.map(function (member) {\n        return React.createElement(\"div\", {\n          key: member._id,\n          className: \"item members\",\n          onClick: deleteMember,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 63\n          },\n          __self: this\n        }, member.username);\n      }));\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74\n        },\n        __self: this\n      }, React.createElement(\"form\", {\n        onSubmit: this.addGroup,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        type: \"text\",\n        onChange: this.handleChange,\n        name: \"name\",\n        placeholder: \"group name\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77\n        },\n        __self: this\n      }, memberList), React.createElement(\"button\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78\n        },\n        __self: this\n      }, \"Add group\"))), React.createElement(AddUser, Object.assign({}, this.state, {\n        addMember: addMember,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81\n        },\n        __self: this\n      })));\n    }\n  }]);\n\n  return AddGroup;\n}(Component);\n\nexport default AddGroup;","map":{"version":3,"sources":["/home/oriol/Documents/PROGRAMMING/Exercicis/mern-stepbystep/src/components/group/AddGroup.js"],"names":["React","Component","Redirect","AddUser","axios","AddGroup","props","addGroup","e","preventDefault","state","name","members","post","then","response","get","data","_id","setState","redirect","catch","err","console","log","handleChange","target","value","addMember","suggestion","deleteMember","index","findIndex","member","username","currentTarget","textContent","splice","bind","memberList","map"],"mappings":";;;;;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,QAAT,QAAyB,cAAzB;AACA,OAAOC,OAAP,MAAoB,iBAApB;AACA,OAAOC,KAAP,MAAkB,OAAlB;;IAEMC,Q;;;;;AACJ,oBAAYC,KAAZ,EAAkB;AAAA;;AAAA;;AAChB,kFAAMA,KAAN;;AADgB,UAalBC,QAbkB,GAaP,UAAAC,CAAC,EAAI;AACdA,MAAAA,CAAC,CAACC,cAAF;AADc,wBAEY,MAAKC,KAFjB;AAAA,UAENC,IAFM,eAENA,IAFM;AAAA,UAEAC,OAFA,eAEAA,OAFA;AAGdR,MAAAA,KAAK,CAACS,IAAN,CAAW,sCAAX,EACE;AAAEF,QAAAA,IAAI,EAAEA,IAAR;AAAcC,QAAAA,OAAO,EAAEA;AAAvB,OADF,EAECE,IAFD,CAEM,UAAAC,QAAQ,EAAI;AAChBX,QAAAA,KAAK,CAACY,GAAN,gDAAkDD,QAAQ,CAACE,IAAT,CAAcC,GAAhE,GACCJ,IADD,CACM,UAAAC,QAAQ,EAAI;AAChB,gBAAKI,QAAL,CAAc;AACZC,YAAAA,QAAQ,EAAE;AADE,WAAd;AAGD,SALD,EAMCC,KAND,CAMO,UAAAC,GAAG;AAAA,iBAAIC,OAAO,CAACC,GAAR,CAAYF,GAAZ,CAAJ;AAAA,SANV;AAOD,OAVD,EAWCD,KAXD,CAWO,UAAAC,GAAG;AAAA,eAAIC,OAAO,CAACC,GAAR,CAAYF,GAAZ,CAAJ;AAAA,OAXV;AAYD,KA5BiB;;AAAA,UA6BlBG,YA7BkB,GA6BH,UAAAjB,CAAC,EAAI;AAClB,YAAKW,QAAL,qBACGX,CAAC,CAACkB,MAAF,CAASf,IADZ,EACmBH,CAAC,CAACkB,MAAF,CAASC,KAD5B;AAGD,KAjCiB;;AAAA,UAkClBC,SAlCkB,GAkCN,UAAAC,UAAU,EAAI;AACxB,YAAKV,QAAL,CAAc;AACZP,QAAAA,OAAO,+BAAM,MAAKF,KAAL,CAAWE,OAAjB,IAA0BiB,UAA1B;AADK,OAAd;AAGD,KAtCiB;;AAAA,UAuClBC,YAvCkB,GAuCH,UAAAtB,CAAC,EAAI;AAAA,UACVI,OADU,GACE,MAAKF,KADP,CACVE,OADU;AAElB,UAAMmB,KAAK,GAAGnB,OAAO,CAACoB,SAAR,CAAkB,UAAAC,MAAM;AAAA,eAAIA,MAAM,CAACC,QAAP,KAAoB1B,CAAC,CAAC2B,aAAF,CAAgBC,WAAxC;AAAA,OAAxB,CAAd;AACAxB,MAAAA,OAAO,CAACyB,MAAR,CAAeN,KAAf,EAAsB,CAAtB;;AACA,YAAKZ,QAAL,CAAc;AAAEP,QAAAA,OAAO,EAAEA;AAAX,OAAd;AACD,KA5CiB;;AAEhB,UAAKF,KAAL,GAAa;AACXC,MAAAA,IAAI,EAAE,EADK;AAEXC,MAAAA,OAAO,EAAE,CAAC;AACRsB,QAAAA,QAAQ,EAAE5B,KAAK,CAAC4B,QADR;AAERhB,QAAAA,GAAG,EAAEZ,KAAK,CAACY;AAFH,OAAD,CAFE;AAMXE,MAAAA,QAAQ,EAAE;AANC,KAAb;AAQA,UAAKb,QAAL,GAAgB,MAAKA,QAAL,CAAc+B,IAAd,uDAAhB;AACA,UAAKb,YAAL,GAAoB,MAAKA,YAAL,CAAkBa,IAAlB,uDAApB;AAXgB;AAYjB;;;;6BAiCQ;AAAA,yBACuB,KAAK5B,KAD5B;AAAA,UACCU,QADD,gBACCA,QADD;AAAA,UACWR,OADX,gBACWA,OADX;AAAA,UAECgB,SAFD,GAE6B,IAF7B,CAECA,SAFD;AAAA,UAEYE,YAFZ,GAE6B,IAF7B,CAEYA,YAFZ;;AAGP,UAAIV,QAAJ,EAAc;AACZ,eAAO,oBAAC,QAAD;AAAU,UAAA,EAAE,EAAC,SAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAAP;AACD;;AAED,UAAMmB,UAAU,GACd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAEI3B,OAAO,CAAC4B,GAAR,CAAY,UAAAP,MAAM,EAAI;AACpB,eAAQ;AAAK,UAAA,GAAG,EAAEA,MAAM,CAACf,GAAjB;AAAsB,UAAA,SAAS,EAAC,cAAhC;AACE,UAAA,OAAO,EAAEY,YADX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAEKG,MAAM,CAACC,QAFZ,CAAR;AAID,OALD,CAFJ,CADF;AAaA,aACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAM,QAAA,QAAQ,EAAE,KAAK3B,QAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACC;AAAO,QAAA,IAAI,EAAC,MAAZ;AAAmB,QAAA,QAAQ,EAAE,KAAKkB,YAAlC;AAAgD,QAAA,IAAI,EAAC,MAArD;AAA4D,QAAA,WAAW,EAAC,YAAxE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADD,EAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAMc,UAAN,CAFF,EAGE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAHF,CADF,CADF,EAQE,oBAAC,OAAD,oBAAa,KAAK7B,KAAlB;AAAyB,QAAA,SAAS,EAAEkB,SAApC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SARF,CADF;AAYD;;;;EA9EoB3B,S;;AAiFvB,eAAeI,QAAf","sourcesContent":["import React, { Component } from 'react';\nimport { Redirect } from 'react-router';\nimport AddUser from '../user/AddUser';\nimport axios from 'axios';\n\nclass AddGroup extends Component {\n  constructor(props){\n    super(props)\n    this.state = {\n      name: '',\n      members: [{\n        username: props.username,\n        _id: props._id\n      }],\n      redirect: false\n    }\n    this.addGroup = this.addGroup.bind(this)\n    this.handleChange = this.handleChange.bind(this)\n  }\n  addGroup = e => {\n    e.preventDefault()\n    const { name, members } = this.state\n    axios.post('http://localhost:8080/api/groups/new', \n      { name: name, members: members })\n    .then(response => {\n      axios.get(`http://localhost:8080/api/groups/new/${response.data._id}`)\n      .then(response => {\n        this.setState({\n          redirect: true\n        })\n      })\n      .catch(err => console.log(err))\n    })\n    .catch(err => console.log(err))\n  }\n  handleChange = e => {\n    this.setState({\n      [e.target.name]: e.target.value\n    })\n  }\n  addMember = suggestion => {\n    this.setState({\n      members: [...this.state.members, suggestion]\n    })\n  }\n  deleteMember = e => {\n    const { members } = this.state;\n    const index = members.findIndex(member => member.username === e.currentTarget.textContent); \n    members.splice(index, 1);\n    this.setState({ members: members })\n  }\n  render() {\n    const { redirect, members } = this.state\n    const { addMember, deleteMember } = this\n    if (redirect) {\n      return <Redirect to='/groups'/>\n    }\n\n    const memberList = (\n      <div>\n        {\n          members.map(member => {\n            return  <div key={member._id} className='item members' \n                      onClick={deleteMember}>\n                        {member.username}\n                    </div>\n          })\n        }\n      </div>\n    )\n    \n    return (\n      <div>\n        <div>\n          <form onSubmit={this.addGroup}>\n        \t  <input type='text' onChange={this.handleChange} name='name' placeholder='group name'/>\n            <div>{memberList}</div>\n            <button>Add group</button>\n          </form>\n        </div>\n        <AddUser {...this.state} addMember={addMember}/>\n      </div>\n    )\n  }\n}\n\nexport default AddGroup;"]},"metadata":{},"sourceType":"module"}