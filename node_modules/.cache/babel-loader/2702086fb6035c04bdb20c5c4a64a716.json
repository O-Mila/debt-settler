{"ast":null,"code":"import _classCallCheck from \"/home/oriol/Documents/PROGRAMMING/Exercicis/mern-stepbystep/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/oriol/Documents/PROGRAMMING/Exercicis/mern-stepbystep/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/oriol/Documents/PROGRAMMING/Exercicis/mern-stepbystep/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/oriol/Documents/PROGRAMMING/Exercicis/mern-stepbystep/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/oriol/Documents/PROGRAMMING/Exercicis/mern-stepbystep/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/oriol/Documents/PROGRAMMING/Exercicis/mern-stepbystep/src/components/group/DebtsList.js\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\n\nvar DebtsList =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(DebtsList, _Component);\n\n  function DebtsList() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, DebtsList);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(DebtsList)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      payerIndex: '',\n      consumerIndex: '',\n      amount: ''\n    };\n\n    _this.handlePayment = function (i, j, amount) {\n      _this.setState({\n        payerIndex: i,\n        consumerIndex: j,\n        amount: amount\n      });\n\n      console.log(_this.state);\n    };\n\n    _this.handleChange = function (e) {\n      _this.setState({\n        amount: e.target.value\n      });\n\n      console.log(_this.state);\n    };\n\n    _this.handleSubmit = function (e, payer, receiver) {\n      e.preventDefault();\n      console.log(_this.state);\n      var _this$props = _this.props,\n          group_id = _this$props.group_id,\n          transferMade = _this$props.transferMade;\n      axios.post(\"http://localhost:8080/api/groups/\".concat(group_id, \"/transfers/new\"), {\n        payer: payer,\n        receiver: receiver,\n        amount: _this.state.amount\n      }).then(function (response) {\n        console.log(response);\n\n        _this.setState({\n          payerIndex: '',\n          consumerIndex: '',\n          amount: ''\n        });\n\n        console.log(_this.state);\n        transferMade();\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(DebtsList, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$state = this.state,\n          payerIndex = _this$state.payerIndex,\n          consumerIndex = _this$state.consumerIndex;\n      var balance = this.props.balance;\n      var indebtedUsers = balance.filter(function (user) {\n        return user.debt.amount.length;\n      });\n      var indebted = React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 49\n        },\n        __self: this\n      }, indebtedUsers.map(function (user, i) {\n        return React.createElement(\"div\", {\n          key: user._id,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 52\n          },\n          __self: this\n        }, user.debt.amount.map(function (amount, j) {\n          return i === payerIndex && j === consumerIndex ? React.createElement(\"div\", {\n            key: user.debt.receiver[j],\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 56\n            },\n            __self: this\n          }, React.createElement(\"form\", {\n            onSubmit: function onSubmit(e) {\n              return _this2.handleSubmit(e, user.debt.receiver[j], user.username);\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 57\n            },\n            __self: this\n          }, \"\".concat(user.username, \" pays \"), React.createElement(\"input\", {\n            type: \"number\",\n            name: \"amount\",\n            value: _this2.state.amount,\n            onChange: _this2.handleChange,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 60\n            },\n            __self: this\n          }), \" to \".concat(user.debt.receiver[j]), React.createElement(\"button\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 63\n            },\n            __self: this\n          }, \"Transfer\"))) : React.createElement(\"div\", {\n            key: user.debt.receiver[j],\n            onClick: function onClick() {\n              return _this2.handlePayment(i, j, amount);\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 71\n            },\n            __self: this\n          }, \"\".concat(user.username, \" owes \").concat(amount, \" to \").concat(user.debt.receiver[j]));\n        }));\n      }));\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 85\n        },\n        __self: this\n      }, indebted));\n    }\n  }]);\n\n  return DebtsList;\n}(Component);\n\nexport default DebtsList;","map":{"version":3,"sources":["/home/oriol/Documents/PROGRAMMING/Exercicis/mern-stepbystep/src/components/group/DebtsList.js"],"names":["React","Component","axios","DebtsList","state","payerIndex","consumerIndex","amount","handlePayment","i","j","setState","console","log","handleChange","e","target","value","handleSubmit","payer","receiver","preventDefault","props","group_id","transferMade","post","then","response","balance","indebtedUsers","filter","user","debt","length","indebted","map","_id","username"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport axios from 'axios';\n\nclass DebtsList extends Component {\n\tstate = {\n\t\tpayerIndex: '',\n\t\tconsumerIndex: '',\n\t\tamount: ''\n\t}\n\thandlePayment = (i,j,amount) => {\n\t\tthis.setState({\n\t\t\tpayerIndex: i,\n\t\t\tconsumerIndex: j,\n\t\t\tamount: amount\n\t\t})\n\t\tconsole.log(this.state)\n\t}\n\thandleChange = e => {\n\t\tthis.setState({\n\t\t\tamount: e.target.value\n\t\t})\n\t\tconsole.log(this.state)\n\t}\n\thandleSubmit = (e,payer,receiver) => {\n\t\te.preventDefault()\n\t\tconsole.log(this.state)\n\t\tconst { group_id, transferMade } = this.props\n\t\taxios.post(`http://localhost:8080/api/groups/${group_id}/transfers/new`, { \n\t\t\tpayer: payer,\n\t\t\treceiver: receiver,\n\t\t\tamount: this.state.amount\n\t\t})\n\t\t.then(response => {\n\t\t\tconsole.log(response)\n\t\t\tthis.setState({\n\t\t\t\tpayerIndex: '',\n\t\t\t\tconsumerIndex: '',\n\t\t\t\tamount: ''\n\t\t\t})\n\t\t\tconsole.log(this.state)\n\t\t\ttransferMade()\n\t\t})\n\t}\n\trender(){\n\t\tconst { payerIndex, consumerIndex } = this.state\n\t\tconst { balance } = this.props\n\t\tconst indebtedUsers = balance.filter(user => user.debt.amount.length)\n\t\tconst indebted = (\n\t\t\t<div>\n\t\t\t{\n\t\t\t\tindebtedUsers.map((user, i) =>\n\t\t\t\t\t<div key={user._id}>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tuser.debt.amount.map((amount, j) => (i === payerIndex && j === consumerIndex) ?\n\t\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\t\t<div key={user.debt.receiver[j]}>\n\t\t\t\t\t\t\t\t\t<form onSubmit={e => \n\t\t\t\t\t\t\t\t\t\tthis.handleSubmit(e,user.debt.receiver[j],user.username)} >\n\t\t\t\t\t\t\t\t\t\t{`${user.username} pays `}\n\t\t\t\t\t\t\t\t\t\t<input type='number' name='amount' value={this.state.amount}\n\t\t\t\t\t\t\t\t\t\t\tonChange={this.handleChange} />\n\t\t\t\t\t\t\t\t\t\t{` to ${user.debt.receiver[j]}`}\n\t\t\t\t\t\t\t\t\t\t<button>Transfer</button>\n\t\t\t\t\t\t\t\t\t</form>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t) \n\n\t\t\t\t\t\t\t\t: \n\n\t\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\t\t<div key={user.debt.receiver[j]} \n\t\t\t\t\t\t\t\t\tonClick={() => this.handlePayment(i,j,amount)} >\n\t\t\t\t\t\t\t\t\t\t{`${user.username} owes ${amount} to ${user.debt.receiver[j]}`}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t}\n\t\t\t\t\t</div>\n\t\t\t\t)\n\t\t\t}\n\t\t\t</div>\n\t\t)\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t<div>{indebted}</div>\n\t\t\t</div>\n\t\t)\t\n\t}\n}\n\nexport default DebtsList;"]},"metadata":{},"sourceType":"module"}