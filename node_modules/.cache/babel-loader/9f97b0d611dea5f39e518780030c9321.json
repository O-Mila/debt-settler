{"ast":null,"code":"import _toConsumableArray from \"/home/oriol/Documents/PROGRAMMING/Exercicis/mern-stepbystep/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _defineProperty from \"/home/oriol/Documents/PROGRAMMING/Exercicis/mern-stepbystep/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"/home/oriol/Documents/PROGRAMMING/Exercicis/mern-stepbystep/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/oriol/Documents/PROGRAMMING/Exercicis/mern-stepbystep/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/oriol/Documents/PROGRAMMING/Exercicis/mern-stepbystep/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/oriol/Documents/PROGRAMMING/Exercicis/mern-stepbystep/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/oriol/Documents/PROGRAMMING/Exercicis/mern-stepbystep/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/home/oriol/Documents/PROGRAMMING/Exercicis/mern-stepbystep/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/home/oriol/Documents/PROGRAMMING/Exercicis/mern-stepbystep/src/components/group/AddGroup.js\";\nimport React, { Component } from 'react';\nimport { Redirect } from 'react-router';\nimport AddUser from '../user/AddUser';\nimport axios from 'axios';\n\nvar AddGroup =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(AddGroup, _Component);\n\n  function AddGroup(props) {\n    var _this;\n\n    _classCallCheck(this, AddGroup);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(AddGroup).call(this, props));\n\n    _this.addGroup = function (e) {\n      e.preventDefault();\n      var _this$state = _this.state,\n          name = _this$state.name,\n          members = _this$state.members;\n      axios.post('http://localhost:8080/api/groups/new', {\n        name: name,\n        members: members\n      }).then(function (response) {\n        axios.get(\"http://localhost:8080/api/groups/new/\".concat(response.data._id)).then(function (response) {\n          _this.setState({\n            redirect: true\n          });\n        }).catch(function (err) {\n          return console.log(err);\n        });\n      }).catch(function (err) {\n        return console.log(err);\n      });\n    };\n\n    _this.handleChange = function (e) {\n      _this.setState(_defineProperty({}, e.target.name, e.target.value));\n    };\n\n    _this.addMember = function (suggestion) {\n      _this.setState({\n        members: [].concat(_toConsumableArray(_this.state.members), [suggestion])\n      });\n    };\n\n    _this.deleteMember = function (e) {\n      var members = _this.state.members;\n      var index = members.findIndex(function (member) {\n        return member.username === e.currentTarget.textContent;\n      });\n      members.splice(index, 1);\n\n      _this.setState({\n        members: members\n      });\n    };\n\n    _this.previousPage = function () {\n      var page = _this.state.page;\n\n      if (page > 1) {\n        _this.setState({\n          page: page - 1\n        });\n      }\n    };\n\n    _this.nextPage = function () {\n      var page = _this.state.page;\n\n      if (page < 3) {\n        _this.setState({\n          page: page + 1\n        });\n      }\n    };\n\n    _this.memberList = function () {\n      var members = _this.state.members;\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 68\n        },\n        __self: this\n      }, members.map(function (member) {\n        return React.createElement(\"div\", {\n          key: member._id,\n          className: \"item members\",\n          onClick: _this.deleteMember,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 71\n          },\n          __self: this\n        }, member.username);\n      }));\n    };\n\n    _this.pageContent = function () {\n      var _this$state2 = _this.state,\n          name = _this$state2.name,\n          page = _this$state2.page;\n\n      if (page === 1) {\n        return React.createElement(\"div\", {\n          className: \"ui container\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 84\n          },\n          __self: this\n        }, React.createElement(\"input\", {\n          type: \"text\",\n          onChange: _this.handleChange,\n          name: \"name\",\n          placeholder: \"group name\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 85\n          },\n          __self: this\n        }));\n      } else if (page === 2) {\n        return React.createElement(\"div\", {\n          className: \"ui container\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 90\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 91\n          },\n          __self: this\n        }, _this.memberList()), React.createElement(AddUser, Object.assign({}, _this.state, {\n          addMember: _this.addMember,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 92\n          },\n          __self: this\n        })));\n      } else {\n        return React.createElement(\"div\", {\n          className: \"ui container\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 97\n          },\n          __self: this\n        }, React.createElement(\"form\", {\n          onSubmit: _this.addGroup,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 98\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 99\n          },\n          __self: this\n        }, name), React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 100\n          },\n          __self: this\n        }, _this.memberList()), React.createElement(\"button\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 101\n          },\n          __self: this\n        }, \"Add group\")));\n      }\n    };\n\n    _this.state = {\n      name: '',\n      members: [{\n        username: props.username,\n        _id: props._id\n      }],\n      page: 1,\n      redirect: false\n    };\n    _this.addGroup = _this.addGroup.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleChange = _this.handleChange.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(AddGroup, [{\n    key: \"render\",\n    value: function render() {\n      var _this$state3 = this.state,\n          redirect = _this$state3.redirect,\n          page = _this$state3.page;\n\n      if (redirect) {\n        return React.createElement(Redirect, {\n          to: \"/groups\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 110\n          },\n          __self: this\n        });\n      }\n\n      var previousPage = page > 1 && React.createElement(\"div\", {\n        className: \"ui left floated teal button\",\n        onClick: this.previousPage,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113\n        },\n        __self: this\n      }, \"Back\");\n      var nextPage = page < 3 && React.createElement(\"div\", {\n        className: \"ui right floated yellow button\",\n        onClick: this.nextPage,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115\n        },\n        __self: this\n      }, \"Forward\");\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118\n        },\n        __self: this\n      }, previousPage), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 119\n        },\n        __self: this\n      }, this.pageContent()), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 120\n        },\n        __self: this\n      }, nextPage));\n    }\n  }]);\n\n  return AddGroup;\n}(Component);\n\nexport default AddGroup;","map":{"version":3,"sources":["/home/oriol/Documents/PROGRAMMING/Exercicis/mern-stepbystep/src/components/group/AddGroup.js"],"names":["React","Component","Redirect","AddUser","axios","AddGroup","props","addGroup","e","preventDefault","state","name","members","post","then","response","get","data","_id","setState","redirect","catch","err","console","log","handleChange","target","value","addMember","suggestion","deleteMember","index","findIndex","member","username","currentTarget","textContent","splice","previousPage","page","nextPage","memberList","map","pageContent","bind"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { Redirect } from 'react-router';\nimport AddUser from '../user/AddUser';\nimport axios from 'axios';\n\nclass AddGroup extends Component {\n  constructor(props){\n    super(props)\n    this.state = {\n      name: '',\n      members: [{\n        username: props.username,\n        _id: props._id\n      }],\n      page: 1,\n      redirect: false\n    }\n    this.addGroup = this.addGroup.bind(this)\n    this.handleChange = this.handleChange.bind(this)\n  }\n  addGroup = e => {\n    e.preventDefault()\n    const { name, members } = this.state\n    axios.post('http://localhost:8080/api/groups/new', \n      { name: name, members: members })\n    .then(response => {\n      axios.get(`http://localhost:8080/api/groups/new/${response.data._id}`)\n      .then(response => {\n        this.setState({\n          redirect: true\n        })\n      })\n      .catch(err => console.log(err))\n    })\n    .catch(err => console.log(err))\n  }\n  handleChange = e => {\n    this.setState({\n      [e.target.name]: e.target.value\n    })\n  }\n  addMember = suggestion => {\n    this.setState({\n      members: [...this.state.members, suggestion]\n    })\n  }\n  deleteMember = e => {\n    const { members } = this.state;\n    const index = members.findIndex(member => member.username === e.currentTarget.textContent); \n    members.splice(index, 1);\n    this.setState({ members: members })\n  }\n  previousPage = () => {\n    const { page } = this.state\n    if(page > 1){\n      this.setState({ page: page - 1 })\n    }\n  }\n  nextPage = () => {\n    const { page } = this.state\n    if(page < 3){\n      this.setState({ page: page + 1})\n    }\n  }\n  memberList = () => {\n      const { members } = this.state\n      return (\n      <div>\n        {\n          members.map(member => {\n            return  <div key={member._id} className='item members' \n                      onClick={this.deleteMember}>\n                        {member.username}\n                    </div>\n          })\n        }\n      </div>\n      )\n    }\n    pageContent = () => {\n      const { name, page } = this.state\n      if(page === 1){\n        return (\n          <div className='ui container'>\n            <input type='text' onChange={this.handleChange} name='name' placeholder='group name'/>\n          </div>\n        )\n      } else if(page === 2){\n        return (\n          <div className='ui container'>\n            <div>{this.memberList()}</div>\n            <AddUser {...this.state} addMember={this.addMember}/>\n          </div>\n        )\n      } else {\n        return (\n          <div className='ui container'>\n            <form onSubmit={this.addGroup}>\n              <div>{name}</div>\n              <div>{this.memberList()}</div>\n              <button>Add group</button>\n            </form>\n          </div>\n        )\n      }\n    }\n  render() {\n    const { redirect, page } = this.state\n    if (redirect) {\n      return <Redirect to='/groups'/>\n    }\n    const previousPage = page > 1 && \n      <div className='ui left floated teal button' onClick={this.previousPage}>Back</div>\n    const nextPage = page < 3 &&\n      <div className='ui right floated yellow button' onClick={this.nextPage}>Forward</div>\n    return (\n      <div>\n        <div>{previousPage}</div>\n        <div>{this.pageContent()}</div>\n        <div>{nextPage}</div>\n      </div>\n    )\n  }\n}\n\nexport default AddGroup;"]},"metadata":{},"sourceType":"module"}